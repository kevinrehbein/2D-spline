<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="main.js" defer></script>
    <link rel="stylesheet" href="style.css" />
    <title>2D Spline</title>
  </head>
  <body>
    <div class="container">
      <canvas class="board" width="800" height="400"
        >Este brownser não suporta canvas</canvas
      >
    </div>
    <div class="container points">
      <h5>Pontos Restantes: 10</h5>
    </div>
    <div class="container">
      <button id="generatebutton">Generate!</button>
    </div>
  </body>
</html>
!

<!--
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spline Catmull-Rom em JavaScript</title>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        background-color: #f0f0f0;
      }
      canvas {
        border: 1px solid #000;
        background-color: #fff;
      }
    </style>
  </head>
  <body>
    <h1>Implementação de Spline Catmull-Rom</h1>
    <canvas id="myCanvas" width="800" height="600"></canvas>

    <script>
      /**
       * Calcula um único ponto em um segmento da spline Catmull-Rom.
       * @param {number} t - O parâmetro de interpolação, entre 0 e 1.
       * @param {{x: number, y: number}} p0 - Ponto de controle 0 (ponto anterior a p1).
       * @param {{x: number, y: number}} p1 - Ponto de controle 1 (início do segmento da curva).
       * @param {{x: number, y: number}} p2 - Ponto de controle 2 (fim do segmento da curva).
       * @param {{x: number, y: number}} p3 - Ponto de controle 3 (ponto posterior a p2).
       * @returns {{x: number, y: number}} O ponto calculado na curva.
       */
      function getCatmullRomPoint(t, p0, p1, p2, p3) {
        // Esta é a implementação direta da fórmula matemática (com tau = 0)
        const t2 = t * t;
        const t3 = t2 * t;

        const x =
          0.5 *
          (2 * p1.x +
            (-p0.x + p2.x) * t +
            (2 * p0.x - 5 * p1.x + 4 * p2.x - p3.x) * t2 +
            (-p0.x + 3 * p1.x - 3 * p2.x + p3.x) * t3);

        const y =
          0.5 *
          (2 * p1.y +
            (-p0.y + p2.y) * t +
            (2 * p0.y - 5 * p1.y + 4 * p2.y - p3.y) * t2 +
            (-p0.y + 3 * p1.y - 3 * p2.y + p3.y) * t3);

        return { x, y };
      }

      /**
       * Gera uma lista de pontos que formam a spline Catmull-Rom completa.
       * @param {Array<{x: number, y: number}>} points - A lista de pontos de controle principais.
       * @param {number} [pointsPerSegment=10] - A resolução da curva (quantos pontos calcular por segmento).
       * @returns {Array<{x: number, y: number}>} Uma lista de pontos que formam a curva suave.
       */
      function generateCatmullRomSpline(points, pointsPerSegment = 20) {
        const splinePoints = [];
        const numSegments = points.length - 1;

        for (let i = 0; i < numSegments; i++) {
          // Para cada segmento (entre points[i] e points[i+1]), precisamos de 4 pontos: p0, p1, p2, p3.

          // p1 e p2 são os pontos do segmento atual.
          const p1 = points[i];
          const p2 = points[i + 1];

          // p0 é o ponto anterior a p1. Para o primeiro segmento, duplicamos o primeiro ponto.
          const p0 = i === 0 ? points[i] : points[i - 1];

          // p3 é o ponto seguinte a p2. Para o último segmento, duplicamos o último ponto.
          const p3 = i === numSegments - 1 ? points[i + 1] : points[i + 2];

          // Agora, calculamos os pontos intermediários para este segmento.
          for (let j = 0; j <= pointsPerSegment; j++) {
            const t = j / pointsPerSegment;
            const pointOnCurve = getCatmullRomPoint(t, p0, p1, p2, p3);
            splinePoints.push(pointOnCurve);
          }
        }
        return splinePoints;
      }

      // --- Lógica de Desenho no Canvas ---

      const canvas = document.getElementById("myCanvas");
      const ctx = canvas.getContext("2d");

      // 1. Defina seus pontos de controle aqui
      const controlPoints = [
        { x: 100, y: 300 },
        { x: 250, y: 150 },
        { x: 400, y: 450 },
        { x: 550, y: 100 },
        { x: 700, y: 300 },
      ];

      // 2. Gere os pontos da spline
      const curvePoints = generateCatmullRomSpline(controlPoints);

      // 3. Desenhe tudo no canvas

      // Desenha os pontos de controle (círculos vermelhos)
      ctx.fillStyle = "red";
      ctx.strokeStyle = "darkred";
      for (const point of controlPoints) {
        ctx.beginPath();
        ctx.arc(point.x, point.y, 8, 0, 2 * Math.PI);
        ctx.fill();
        ctx.stroke();
      }

      // Desenha a spline (linha azul)
      ctx.strokeStyle = "blue";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(curvePoints[0].x, curvePoints[0].y);
      for (let i = 1; i < curvePoints.length; i++) {
        ctx.lineTo(curvePoints[i].x, curvePoints[i].y);
      }
      ctx.stroke();
    </script>
  </body>
</html>
-->
